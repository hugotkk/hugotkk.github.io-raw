---
title: "AWS Certified Advanced Networking - Specialty"
date: 2021-11-26
tags:
- cert
- exam
- aws
- networking
---

# Resources

* [Exam Landing Page](https://aws.amazon.com/certification/certified-advanced-networking-specialty)
* [Sample Questions](https://d1.awsstatic.com/training-and-certification/docs-advnetworking-spec/AWS-Certified-Advanced-Networking-Specialty_Sample-Questions.pdf)
* [Exam Guide](https://d1.awsstatic.com/training-and-certification/docs-advnetworking-spec/AWS-Certified-Advanced-Networking-Specialty_Exam-Guide.pdf)
* [udemy course](https://www.udemy.com/course/aws-certified-advanced-networking-specialty-ans/)
* [udemy mock exam](https://www.udemy.com/course/aws-certified-advanced-networking-specialty-ans/)
* [whizlabs test & hand-on labs](https://www.whizlabs.com/learn/course/aws-advanced-networking-speciality)

# TODO

* [X] take notes
* [X] revision
* [X] whizlabs
* [X] mocks (by topic)
* [X] mock 1 (udemy)
* [X] mock 2,3,4 (whizlabs)
* [X] examtopic
* [X] udemy quiz + exercise

# Revision 

The numbers below are the page no of the udemy course's pdf: AWS Certified Networking Specialty Slides v1.1.

## Summary

* DNS (151)
* Advanced Networking (188)
* VPC Endpoint (292, 298)
* Site-to-site VPN (347, 401, 407)
* VPN Tunnels and Routing (348, 352)
* DX Gateway with VGW (532)
* DX with TGW (547)
* DX Billing (624)
* DX (630)
* Troubleshooting in DX (626)
* Gateway Load Balancer (816)

## Q & A

* ALB (677)
* DX (625)

## Good to know

* SG (46)
* BYOIP (90)
* VPC Traffic Mirroring (105)
* DHCP Option Sets (124)
* TGW (251)
* AWS Site-to-Site VPN (403)
* Network Load Balancer (656)

## Comparisons

* private, public and EIP (33)
* IPv4, IPv6 (36)
* NACL, SG (48)
* NAT Gateway, Instance (64)
* VPC Peering vs Transit Gateway
* Cloudfront function vs lambda@edge (703)
* AWS global accelerator vs Cloudfront (711)

## Exam Essential

* VPC Fundamentals (67)
* Advanced VPC (190)
* VPC Peering Endpoint (301)
* AWs Site-to-Site VPN (402)
* Direct Connect (632)
* Firewall (806)
* Gateway Load Balancer (817)

## Revision by topic

### Playlists

* [global accelerator](https://www.youtube.com/watch?v=DuXx0UpUKSg&list=PLcjWRSA2O5d1zQyIZ0sIdWF7PLbVmHMJJ)
* [api gateway](https://www.youtube.com/watch?v=KqTsBi3DisE&list=PLcjWRSA2O5d079rC5oEClq7q0r3po7QKL)
* [client vpn](https://www.youtube.com/watch?v=Bv70DoHDDCY&list=PLcjWRSA2O5d04Hxv7sl8-cyU4IXllh8n0)
* [cloudformation](https://www.youtube.com/watch?v=iXs2picUFN0&list=PLcjWRSA2O5d1D-MC8GPkVb4veRzP7syOb)
* [cloudfront](https://www.youtube.com/playlist?list=PLcjWRSA2O5d3J15TeQX8ze8P_wOjN9Cqu)
* [cloudwatch](https://www.youtube.com/watch?v=WDBD3JmpLqs&list=PLcjWRSA2O5d0fbeOSlF2TTQqlVVjYkxAW&index=1&t=357s)
* [cloudhsm](https://www.youtube.com/watch?v=hEVks207ALM&list=PLcjWRSA2O5d2yguufKSgAqaEMQDq2Gofb)
* [cognito](https://www.youtube.com/watch?v=r1P_glQGvfo&list=PLcjWRSA2O5d1WxyOwFRdKRYnoMLzSZV65)
* [config](https://www.youtube.com/watch?v=oBuLtfGHETY&list=PLcjWRSA2O5d2fzk7gEQC1BI7FsUf8nBU6)
* [dx](https://www.youtube.com/watch?v=iXs2picUFN0&list=PLcjWRSA2O5d08888iKcuFy0uu0K0rDPG8)
* [edge computing](https://www.youtube.com/watch?v=Q6OgRawyjIQ&list=PLcjWRSA2O5d2YPhKJMIfjM4pJO-efELeq)
* [elb](https://www.youtube.com/watch?v=aKMLgFVxZYk&list=PLcjWRSA2O5d15hl5_CFN5Tp01BB2ivi9s)
* [firehose](https://www.youtube.com/watch?v=DPT3swb6zgI&list=PLcjWRSA2O5d1MG-Kjs8ZTTqtRHBuVPRmX)
* [guarduty](https://www.youtube.com/watch?v=Z7PePqSwysI&list=PLcjWRSA2O5d3oNak_YGAAft8lHJKmTfBq)
* [inspector](https://www.youtube.com/watch?v=6jyGUgJqgk4&list=PLcjWRSA2O5d1erQAneG480Dtnr2eZwaff)
* [lambda](https://www.youtube.com/watch?v=nGlc_GdvyXk&list=PLcjWRSA2O5d3Whuw1ueIvSkjGtUXOqdYN)
* [organization](https://www.youtube.com/watch?v=uOrq8ZUuaAQ&list=PLcjWRSA2O5d35QiAS0xgq6XwwBKvNMSOg)
* [route53](https://www.youtube.com/watch?v=E33dA6n9O7I&list=PLcjWRSA2O5d0nWA6kpX74oNw0ggL-uo1N)
* [s3](https://www.youtube.com/watch?v=s1Tu0yKmDKU&list=PLcjWRSA2O5d1slztYOYJ9EpVGGBsZpaWd)
* [sqs](https://www.youtube.com/watch?v=LzFuXvhA5xk&list=PLcjWRSA2O5d0ttAczLnslDSbaoXtGIU3f)
* [ssm](https://www.youtube.com/watch?v=2efz7EH4czQ&list=PLcjWRSA2O5d2lSOKTdXmVDjPwavl5B9yW)
* [vpc](https://www.youtube.com/watch?v=mAdYsD25GQg&list=PLcjWRSA2O5d1g5BrULl-SYfFexBYOzSsk)
* [vpn](https://www.youtube.com/watch?v=iXs2picUFN0&list=PLcjWRSA2O5d3fzCT78J6OUTAENzeAQkGr)
* [waf](https://www.youtube.com/watch?v=_M872LhrcD4&list=PLcjWRSA2O5d0ehod0s8S2SlSCYHbje2tg)
* [workspace](https://www.youtube.com/watch?v=lV_PjZ4gV9s&list=PLcjWRSA2O5d0eMMBqwnJY1nkGLcv4oP3A)

### References

* [accelerator - custom routing](https://aws.amazon.com/global-accelerator/features/#:~:text=for%20your%20applications.-,Custom%20routing%20accelerator,-Custom%20routing%20accelerators)
* [accelerator - custom routing](https://docs.aws.amazon.com/global-accelerator/latest/dg/work-with-custom-routing-accelerators.html)
* [alb - limit request to clondfront only](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/restrict-access-to-load-balancer.html#restrict-alb-add-custom-header)
* [aurora - regional failover](https://aws.amazon.com/blogs/database/deploy-multi-region-amazon-aurora-applications-with-a-failover-blueprint/)
* [aws organization - SCP](https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html)
* [cloudfront - origin types](https://docs.aws.amazon.com/cloudfront/latest/APIReference/API_Origin.html)
* [cloudfront - signed url vs signed cookies](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-choosing-signed-urls-cookies.html)
* [cloudfront - troubleshooting](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/troubleshooting-response-errors.html)
* [cloudfront - will forward the response when first byte arrives from the origin](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/HowCloudFrontWorks.html#:~:text=As%20soon%20as%20the%20first%20byte%20arrives%20from%20the%20origin%2C%20CloudFront%20begins%20to%20forward%20the%20files%20to%20the%20user.%20CloudFront%20also%20adds%20the%20files%20to%20the%20cache%20in%20the%20edge%20location%20for%20the%20next%20time%20someone%20requests%20those%20files.)
* [cloudhsm - auto ha](https://docs.aws.amazon.com/cloudhsm/latest/userguide/clusters.html#:~:text=When%20you%20create%20an%20AWS%20CloudHSM%20cluster%20with%20more%20than%20one%20HSM%2C%20you%20automatically%20get%20load%20balancing)
* [cloudtrail - 5 trails for region](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/WhatIsCloudTrail-Limits.html#:~:text=Trails%20per%20region,5)
* [cloudtrail - log encryption with KMS](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/encrypting-cloudtrail-log-files-with-aws-kms.html#:~:text=To%20provide%20a%20security%20layer%20that%20is%20directly%20manageable%2C%20you%20can%20instead%20use%20server%2Dside%20encryption%20with%20AWS%20KMS%E2%80%93managed%20keys%20(SSE%2DKMS)%20for%20your%20CloudTrail%20log%20files)
* [cloudtrail - use integrity validation to check the log was modified, delete or change](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-log-file-validation-intro.html)
* [cloudwatch - namespace valid characters](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#:~:text=These%20names%20must%20contain%20valid%20XML%20characters%2C%20and%20be%20fewer%20than%20256%20characters%20in%20length.%20Possible%20characters%20are%3A%20alphanumeric%20characters%20(0%2D9A%2DZa%2Dz)%2C%20period%20(.)%2C%20hyphen%20(%2D)%2C%20underscore%20(_)%2C%20forward%20slash%20(/)%2C%20hash%20(%23)%2C%20and%20colon%20(%3A).)
* [cloudwatch - no need to config sns to provide data every minute](https://docs.aws.amazon.com/sns/latest/dg/sns-monitoring-using-cloudwatch.html#:~:text=The%20metrics%20you%20configure%20with%20CloudWatch%20for%20your%20Amazon%20SNS%20topics%20are%20automatically%20collected%20and%20pushed%20to%20CloudWatch%20at%201%2Dminute%20intervals.)
* [cloudwatch - skip metrics](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/publishingMetrics.html#publishingZero)
* [config - managed rules](https://docs.aws.amazon.com/config/latest/developerguide/managed-rules-by-aws-config.html)
* [config - renaming the delivery channel](https://docs.aws.amazon.com/config/latest/developerguide/manage-delivery-channel.html)
* [config - requirements](https://docs.aws.amazon.com/config/latest/developerguide/gs-cli-prereq.html)
* [config - type of triggers](https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config-rules.html)
* [config - viewing configuration compliance](https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_view-compliance.html)
* [costs model](https://github.com/open-guides/og-aws#aws-data-transfer-costs)
* [costs model 2](https://aws.amazon.com/blogs/architecture/overview-of-data-transfer-costs-for-common-architectures/)
* [dhcp - cannot modify and one vpc one dhcp options](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_DHCP_Options.html#:~:text=After%20you%20create,from%20the%20VPC.)
* [dx - dx in public regions can access any other public region](https://docs.aws.amazon.com/directconnect/latest/UserGuide/remote_regions.html#:~:text=AWS%20Direct%20Connect%20locations%20in%20public%20Regions%20or%20AWS%20GovCloud%20(US)%20can%20access%20public%20services%20in%20any%20other%20public%20Region)
* [dx - faq](https://aws.amazon.com/directconnect/faqs/)
* [dx - lag requirement 1](https://docs.aws.amazon.com/directconnect/latest/UserGuide/create-lag.html#:~:text=To%20create%20a%20LAG%20from%20existing%20connections%2C%20the%20connections%20must%20be%20on%20the%20same%20AWS%20device%20(terminate%20at%20the%20same%20AWS%20Direct%20Connect%20endpoint).%20They%20must%20also%20use%20the%20same%20bandwidth.)
* [dx - lag requirement 2](https://docs.aws.amazon.com/directconnect/latest/UserGuide/lags.html#:~:text=All%20connections%20must,Direct%20Connect%20endpoint.)
* [dx - public vif](https://aws.amazon.com/premiumsupport/knowledge-center/connect-private-network-dx-vif/)
* [dx - public vif connectivity](https://docs.aws.amazon.com/directconnect/latest/UserGuide/WorkingWithVirtualInterfaces.html)
* [dx - quotas](https://docs.aws.amazon.com/general/latest/gr/dc.html#limits_directconnect)
* [dx - requirements for virtual interfaces](https://docs.aws.amazon.com/directconnect/latest/UserGuide/WorkingWithVirtualInterfaces.html#:~:text=hosted%20virtual%20interface.-,Prerequisites%20for%20virtual%20interfaces,-Before%20you%20create)
* [dx - vif](https://docs.aws.amazon.com/directconnect/latest/UserGuide/create-vif.html#vif-example-router-files)
* [dx - virtual Interfaces to Direct Connect connections or LAG bundles](https://aws.amazon.com/premiumsupport/knowledge-center/migrate-virtual-interface-dx-lag/)
* [dx - vpn as backup](https://aws.amazon.com/premiumsupport/knowledge-center/configure-vpn-backup-dx/)
* [ec2 - http proxy](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-proxy.html)
* [ec2 - network performance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/general-purpose-instances.html#general-purpose-network-performance)
* [ec2 - retrieve instance metadata](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instancedata-data-retrieval.html)
* [eip - hostname will be changed once eip attached](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#:~:text=When%20you%20associate%20an%20Elastic%20IP%20address%20with%20an%20instance%20that%20previously%20had%20a%20public%20IPv4%20address%2C%20the%20public%20DNS%20host%20name%20of%20the%20instance%20changes%20to%20match%20the%20Elastic%20IP%20address.)
* [eip - public ip change every time stop and start the instance](https://aws.amazon.com/premiumsupport/knowledge-center/ec2-associate-static-public-ip/)
* [eip - public ip will be released once eip attached](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#:~:text=with%20the%20instance.-,When%20you%20associate%20an%20Elastic%20IP%20address%20with%20an%20instance,Elastic%20IP%20address.%20For%20more%20information%2C%20see%20Public%20IPv4%20addresses.,-You%20can%20disassociate)
* [eip - reverse dns record for mailserver](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#:~:text=Before%20you-,create%20a%20reverse%20DNS%20record,-%2C%20you%20must%20set)
* [eni - limitation](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html)
* [flow log](https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html)
* [local zone - alb limitation](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/application-load-balancers.html#:~:text=You%20cannot%20use,as%20a%20target.)
* [local zone - supported service](https://aws.amazon.com/elasticloadbalancing/features/#:~:text=%C2%A0-,Local%20Zone,-%E2%9C%94)
* [ms ad - limitation - not compatible with exchange and skype](https://aws.amazon.com/directoryservice/faqs/#:~:text=Microsoft%20Exchange%20Server)
* [ms ad - requirements](https://docs.aws.amazon.com/directoryservice/latest/admin-guide/ms_ad_getting_started_prereqs.html)
* [nacl - default rule# in nacl](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html#:~:text=18%20CIDR%20range.-,Default%20network%20ACL,-The%20default%20network)
* [nat - need egress-only-internet-gateway for ipv6 to ipv6 commnuication](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html#:~:text=on%2Dpremises%20environment-,Enable%20communication%20with%20IPv4%2Donly%20services%20on%20the%20Internet%20with%20the%20AWS%20CLI,-If%20you%20have)
* [nat - only support tcp udp and icmp](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html#nat-gateway-basics)
* [nat - pricing](https://aws.amazon.com/vpc/pricing/#:~:text=NAT%20Gateway%20%2D%20Pricing%20example)
* [nat - tcp connectin fail as tcp does not support ip fragmentation](https://docs.aws.amazon.com/vpc/latest/userguide/nat-gateway-troubleshooting.html#:~:text=NAT%20gateways%20do%20not%20support%20IP%20fragmentation%20for%20TCP%20or%20ICMP.)
* [placement group - can add / move / remove instance from group](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html)
* [placement group - can launch with diff instance type but not recommended](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html#:~:text=We%20recommend%20using%20the%20same%20instance%20type%20for%20all%20instances%20in%20a%20cluster%20placement%20group)
* [placement group - can span vpcs](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html#:~:text=A%20cluster%20placement%20group%20can%20span%20peered%20VPCs%20in%20the%20same%20Region)
* [placement group - cannot merge placement group](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html#:~:text=You%20can%27t%20merge%20placement%20groups.)
* [placement group - stop and start is fine but may have insufficient capacity error without capacity reservation](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html#:~:text=If%20you%20stop%20an%20instance%20in%20a%20placement%20group%20and%20then%20start%20it%20again%2C%20it%20still%20runs%20in%20the%20placement%20group.%20However%2C%20if%20you%20are%20not%20using%20a%20Capacity%20Reservation%20for%20your%20cluster%20placement%20group%2C%20the%20instance%20start%20fails%20if%20there%20is%20insufficient%20capacity)
* [quicksight - private connection with rds](https://aws.amazon.com/premiumsupport/knowledge-center/quicksight-redshift-private-connection/)
* [redishift - private connectivity with enhanced vpc routing](https://docs.aws.amazon.com/redshift/latest/mgmt/enhanced-vpc-routing.html)
* [route53 - a/p failover](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-failover-types.html)
* [route53 - aws services which support alias records](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-choosing-alias-non-alias.html)
* [route53 - can attach private hosted zone with overlapping namespace in same vpc](https://aws.amazon.com/about-aws/whats-new/2019/11/amazon-route-53-now-supports-overlapping-namespaces-for-private-hosted-zones/)
* [route53 - dns resolution b/w on-premise and aws with ad](https://aws.amazon.com/blogs/security/how-to-set-up-dns-resolution-between-on-premises-networks-and-aws-using-aws-directory-service-and-amazon-route-53/)
* [route53 - dns server with custom domain (white-labe and reusable delegation set)](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/white-label-name-servers.html)
* [route53 - health check rules](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/health-checks-how-route-53-chooses-records.html)
* [route53 - system rules when forwarding less specific domain](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resolver.html#:~:text=System%20rules%20cause%20Resolver%20to%20locally%20resolve%20DNS%20queries%20for%20specific%20domains%20and%20subdomains)
* [simple ad - requirement](https://docs.aws.amazon.com/directoryservice/latest/admin-guide/prereq_simple.html)
* [sns](https://aws.amazon.com/blogs/compute/introducing-message-archiving-and-analytics-for-amazon-sns/)
* [tgw - peering](https://docs.aws.amazon.com/vpc/latest/tgw/tgw-connect.html#tgw-connect-peer)
* [tgw - quotas](https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-quotas.html)
* [tgw - route table priority](https://docs.aws.amazon.com/vpc/latest/tgw/how-transit-gateways-work.html#:~:text=Peered%20transit%20gateways.-,Route%20evaluation%20order,-Transit%20gateway%20routes)
* [vpc - aws cidr tier](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#vpc-sizing-ipv4)
* [vpc - aws does not support broadcast in vpc](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#:~:text=We%20do%20not%20support%20broadcast%20in%20a%20VPC%2C%20therefore%20we%20reserve%20this%20address)
* [vpc - ipv4 subnet cidr prefix](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#:~:text=The%20allowed%20block%20size%20is%20between%20a%20/16%20netmask%20(65%2C536%20IP%20addresses)%20and%20/28%20netmask%20(16%20IP%20addresses))
* [vpc - ipv6 subnet cidr prefix](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#:~:text=You%20can%20associate%20a%20single,fixed%20prefix%20length%20of%20/64.)
* [vpc - jumbo frame packet drop as Don&#39;t Fragment flag is set but the network does not support higher MTU](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/network_mtu.html#:~:text=If%20packets%20are%20over%201500%20bytes%2C%20they%20are%20fragmented%2C%20or%20they%20are%20dropped%20if%20the%20Don%27t%20Fragment%20flag%20is%20set%20in%20the%20IP%20header.)
* [vpc - multicast support](https://aws.amazon.com/blogs/networking-and-content-delivery/integrating-external-multicast-services-with-aws/)
* [vpc - reserved address in cidr](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#:~:text=10.0.0.0%3A%20Network%20address,reserve%20this%20address.)
* [vpc - route table qutoa](https://docs.aws.amazon.com/vpc/latest/userguide/amazon-vpc-limits.html#:~:text=Routes%20per%20route%20table%20(non%2Dpropagated%20routes))
* [vpc - route table troubleshoot](https://aws.amazon.com/premiumsupport/knowledge-center/troubleshoot-vpc-route-table/)
* [vpc - usage of enableDnsHostnames and enableDnsSupport](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html#:~:text=Description-,enableDnsHostnames,-Determines%20whether%20the)
* [vpce - service endpoint support ipv4 over tcp only](https://docs.aws.amazon.com/vpc/latest/privatelink/endpoint-service-overview.html#:~:text=An%20endpoint%20service%20supports%20IPv4%20traffic%20over%20TCP%20only.)
* [vpce - tagging is suported](https://aws.amazon.com/about-aws/whats-new/2019/05/amazon-vpc-endpoints-now-support-tagging-for-gateway-endpoints-interface-endpoints-and-endpoint-services/)
* [vpce - use prefix list in security group](https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway.html#:~:text=To%20add%20an%20outbound%20rule%20for%20a%20gateway%20endpoint)
* [vpn - ipv6 support on tgw but not vgw](https://aws.amazon.com/about-aws/whats-new/2020/08/aws-site-to-site-vpn-supports-ipv6-traffic/)
* [vpn - static route a/p mode (priority)](https://docs.aws.amazon.com/vpn/latest/s2svpn/cgw-static-routing-examples.html#:~:text=To%20configure%20the%20static%20routes)
* [vpn - troubleshooting](https://aws.amazon.com/premiumsupport/knowledge-center/vpn-tunnel-phase-1-ike/)
* [vpn - why cannot overlap the cidr](https://docs.aws.amazon.com/vpn/latest/s2svpn/VPNRoutingTypes.html#:~:text=If%20propagated%20routes%20from%20a%20Site%2Dto%2DSite%20VPN%20connection%20or%20AWS%20Direct%20Connect%20connection%20overlap%20with%20the%20local%20route%20for%20your%20VPC%2C%20the%20local%20route%20is%20most%20preferred%20even%20if%20the%20propagated%20routes%20are%20more%20specific.)
* [vpn -ipsec encryption algorithms](https://www.watchguard.com/help/docs/help-center/en-US/Content/en-US/Fireware/mvpn/general/ipsec_algorithms_protocols_c.html#:~:text=these%20standard%20protocols.-,Encryption%20Algorithms,-Encryption%20algorithms%20protect)
* [waf - config count action to test (monitor mode)](https://aws.amazon.com/waf/faqs/#:~:text=allows%20you%20to-,configure%20a%20%E2%80%9Ccount%E2%80%9D%20action,-for%20rules%2C%20which)
* [waf - rule statement list](https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-statements-list.html)
* [workspaces  - requirements](https://docs.aws.amazon.com/whitepapers/latest/best-practices-deploying-amazon-workspaces/workspaces-requirements.html)
* [appliance in shared vpc](https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html)
* [cloudhub](https://docs.aws.amazon.com/vpn/latest/s2svpn/VPN_CloudHub.html)
* [mult vpc with single customer gateway](https://aws.amazon.com/articles/connecting-a-single-customer-router-to-multiple-vpcs/)
* [multi-vpc network infrastructure](https://docs.aws.amazon.com/whitepapers/latest/building-scalable-secure-multi-vpc-network-infrastructure/vpc-to-vpc-connectivity.html)
* [route table options](https://docs.aws.amazon.com/vpc/latest/userguide/route-table-options.html)
* [shared vpc](https://aws.amazon.com/blogs/architecture/reduce-cost-and-increase-security-with-amazon-vpc-endpoints/)
* [transit vpc](https://docs.aws.amazon.com/whitepapers/latest/aws-vpc-connectivity-options/transit-vpc-option.html)
* [Virtual Private Cloud Connectivity Options](https://docs.aws.amazon.com/whitepapers/latest/aws-vpc-connectivity-options/aws-transit-gateway-vpn.html)
* [vpc peering with cidr overlap](https://docs.aws.amazon.com/vpc/latest/peering/peering-configurations-partial-access.html)
* [vpc with subnet overlapping](https://sxw.medium.com/solving-aws-vpc-overlapping-cidr-connectivity-9ecc2509c5cb)

### VPC Fundamentals (17)

#### What is TCP/IP?

<details>
<summary>Answer</summary>
<p>
<li>application (data)</li>
<li>transport (segment)</li>
<li>network (packet)</li>
<li>link (frame)</li>
<li>physical (frame)</li>
</p>
</details>

#### What is OSI? (306)

<details><summary>Answer</summary><p>
<li>application</li>
<li>presentation</li>
<li>session</li>
<li>transport</li>
<li>network</li>
<li>link</li>
<li>physical</li>
</p></details>
#### How to calculate the no of address in a CIDR (like 192.168.0.1/28)? (18)

<details><summary>Answer</summary><p>
2^(32-28)=16
</p></details>

#### Can we override the main route table in VPC? (26)

<details><summary>Answer</summary><p>
override it at subnet level
</p></details>

#### Which IPs are reserved for a vpc? (29)

<details><summary>Answer</summary><p>
<p>5</p>
<li>0=network</li>
<li>1=router</li>
<li>2=dns</li>
<li>3=reserved</li>
<li>last=broadcast</li>
</p></details>

#### What is the default behaviour of SG (inbound and outbound)? (46)

<details><summary>Answer</summary><p>
<li>inbound: block all</li>
<li>outbound: allow all</li>
</p></details>

#### How is the NAT gateway charged? (59)

<details><summary>Answer</summary><p>
<li>hourly charge</li>
<li>data transfer fee</li>
</p></details>

#### Can we apply SG on a NAT gateway? (59)

<details><summary>Answer</summary><p>
no
</p></details>

#### What is the port range NAT gateway needs for outbound connection? (59)

<details><summary>Answer</summary><p>
1024-65535
</p></details>

#### Why don't we need cross-AZ failover in NAT ? (62)

<details><summary>Answer</summary><p>
because if az down, nat and app are down too
</p></details>

#### What is the most important setting to setup NAT with EC2? (63)

<details><summary>Answer</summary><p>
disable the source and destination check
</p></details>

### Advanced VPC (72)

#### What is the limitation of adding a secondary CIDR? (79)

<details><summary>Answer</summary><p>
<li>aws defines cidr in 3 classes. <s>172 169 10</s><b>192.168 172.16 10.0</b></li>
<li>if the primary cidr is in one of the classes, the secondary cidr must be in the same class or not in any class with an equal / more specific prefix</li>
<li>if the primary cidr is not in one of the class, the secondary cidr must not in any class with equal / more specific prefix</li>
<li><b>5ipv4 1ipv6</b></li>
</p></details>

#### How many private, public and elastic ip and sg can one ENI have? (81, 85)

<details><summary>Answer</summary><p>
<li>private - depends on the instance type</li>
<li>public - 1</li>
<li><s>elastic - 1</s><b>1 eip per private ip</b></li>
</p></details>

#### What is the use case of dual home setup with multiple ENIs? (84)

<details><summary>Answer</summary><p>
<li>1 eni for internal traffic</li>
<li>1 eni for internet traffic</li>
</p></details>

#### What are the prerequisites of BYOIP? (89, 90)

<details><summary>Answer</summary><p>
<li>you should own that ip</li>
<li>ip should have a good record</li>
<li>each account can bring 5 ips (ipv4 & ipv6)</li>
<li><b>ROA</b></li>
<li><b>ipv4: /24; ipv6: /48 pub; /56 pri</b></li>
</p></details>

#### What type of Flow Logs can we capture from a VPC? (92)

<details><summary>Answer</summary><p>
<li>vpc</li>
<li>subnet</li>
<li>eni</li>
</p></details>

#### Where does the Flow Logs Action field come from? (97)

<details><summary>Answer</summary><p>
security group / nacl
</p></details>

#### What type of record cannot be captured in a flow log? (98)

<details><summary>Answer</summary><p>
<li>traffic from aws dns / metadata</li>
<li><b>dhcp, windows licence activation server</b></li>
</p></details>

#### What can be the source & target of a VPC Traffic Mirror? (102, 105)

<details><summary>Answer</summary><p>
<li>source: eni</li>
<li>target: eni, nlb</li>
</p></details>

#### What port does the VPC Traffic Mirror require? (105)

<details><summary>Answer</summary><p>
<b>udp 4789</b>
</p></details>

#### How to set a custom domain / dns on an EC2 instance? (113)

<details><summary>Answer</summary><p>
change the dhcp-option
</p></details>

### VPC DNS and DHCP

#### What does enableDNSSupport do? (117)

<details><summary>Answer</summary><p>
resolve the dns
</p></details>

#### What does enableDNSHostname do? (117)

<details><summary>Answer</summary><p>
assign hostname to the ec2 instance
</p></details>

#### How to resolve the hostname in VPC peering and TGW? (132)

<details><summary>Answer</summary><p>
enable dns support
</p></details>

#### How to resolve the hostname in Hybrid cloud (AWS to on-premise, on-premise to AWS) (old & new way)? (132-150)

<details><summary>Answer</summary><p>
<p>old:</p>
<li>aws -> on-premise: setup ad / dns server on aws; set dhcp to that server; forward query to that server in on-premise dns</li>
<li>on-premise -> aws: setup ad / dns server on aws; use that server in on-premise</li>
<p>new: </p>
<li>aws -> on-premise: setup outbound endpoint to on-premise dns, set forward rule to that endpoint </li>
<li>on-premise -> aws: setup inbound endpoint, forward query to that endpoint in on-premise dns</li>
</p></details>

### VPC Network Performance and Optimization

#### Formula of throughput (154)

#### What is Jumbo frame? (154)

<details><summary>Answer</summary><p>
MTU > 1500 (9001 / 8500)
</p></details>

#### What is Path MTU Discovery? (155)

<details><summary>Answer</summary><p>
check the max MTU support between 2 routes
</p></details>

#### What are the advantages of using placement group - cluster (162)

<details><summary>Answer</summary><p>
low latency
higher bandwidth
</p></details>

#### What is the bandwidth limitation between VPC, EC2 instances, VPN and DX (179-183)?

<details><summary>Answer</summary><p>
<li>vpc = 100%</li>
<li>to igw / other region = 50%</li>
<li>ec2 = 5gbps 10gbps (placement group) single flow</li>
<li>vpn (tgw) 1.25gbps per tunnel and sum up to 25gbps</li>
<li>vpn (vgw) 1.25gbps</li>
<li>dx (vgw/tgw) = 1/10/100gbps</li>
</p></details>

### VPC Peering

#### What is the limitation of VPC Peering? (207)

<details><summary>Answer</summary><p>
non-transitive cannot access igw, nat, vpn, peer, gateway endpoint
</p></details>

### TGW

#### What is the difference between vgw and tgw? (211)

<details><summary>Answer</summary><p>
vgw is non-transitive cannot access igw, nat, vpn, peer, gateway endpoint
</p></details>

#### what attachments does TGW support? (211)

<details><summary>Answer</summary><p>
vpn vpc tgw <b>dxgw</b>
</p></details>

#### What is the special route in TGW? (230) 

<details><summary>Answer</summary><p>
<b>custom route table for each tgw attachment</b>
</p></details>

### VPC Endpoint

#### How many types of VPC endpoint? What is the difference between them? (258)

<details><summary>Answer</summary><p>
<li>interface = has eni attached</li>
<li>gateway = use route table</li>
<li>private link = attach to alb or nlb</li>
<li>all has vpc endpoint policy</li>
</p></details>

#### Can on-premises network access to the gateway endpoint with VPN/DX? (273)

<details><summary>Answer</summary><p>
no
</p></details>

#### What kind of source can be used in a private link? (281)

<details><summary>Answer</summary><p>
nlb and alb
</p></details>

#### How to use hostname in interface endpoint? (288)

<details><summary>Answer</summary><p>
enable private dns
</p></details>

#### How to use the interface endpoint without private DNS? (290)

<details><summary>Answer</summary><p>
use the dns name with "region"
</p></details>

#### When should we use a private link? When should we use VPC Peering (297)

<details><summary>Answer</summary><p>
<li>Many clients need to access the service from different accounts (>125)</li>
<li>use peering when there are many services that need to be accessed</li>
</p></details>

### AWS Site-to-Site VPN

#### What port does IPsec need? (309)

<details><summary>Answer</summary><p>
udp/500
</p></details>

#### Range of public and private ASN (313)

<details><summary>Answer</summary><p>
<li><b>0-65525</b></li>
<li><b>64512-65534</b></li>
</p></details>

#### 4 common BGP Param for routing (319)

<details><summary>Answer</summary><p>
<li>weight as_path med</li>
<li>local-preference</li>
</p></details>

#### What type of VPN does AWS support Site-to-Site VPN? (327)

<details><summary>Answer</summary><p>
ipsec
</p></details>

#### What routing method does AWS support in Site-to-Site VPN? (329)

<details><summary>Answer</summary><p>
bgp / static
</p></details>

#### What port is required in VPN for NAT-T? (335)

<details><summary>Answer</summary><p>
udp/4500
</p></details>


### VPN Tunnels and Routing 

#### How to set Active/Active tunnel (351)

<details><summary>Answer</summary><p>
<li><s>advertise the same prefix. use BGP and ECMP for load balancing</s> <- this will cause the traffic to go randomly</li>
<li>advertise diff prefix. more specific prefixes will be prefered</li>
<li>or use AS_PATH or MED to control the traffic from aws</li>
</p></details>

#### What is DPD? Port to send messages? default timeout? timeout action? (354)

<details><summary>Answer</summary><p>
dead peer detection. detect the dead peer tunnel. 30s. action: <b>clear,</b> restart, none
</p></details>

#### How to prevent a tunnel from terminating due to inactivity (355)

<details><summary>Answer</summary><p>
ping the aws network each 5 seconds to prevent idle tunnel
</p></details>

#### How to monitor the tunnel status? (357)

<details><summary>Answer</summary><p>
set alarm with cloudwatch metrics
</p></details>


### DX

#### What is the fibre mode of DX? (450)

<details><summary>Answer</summary><p>
single
</p></details>

#### what is the data link requirement of DX (450)

<details><summary>Answer</summary><p>
fibre 802.1vlan LX
</p></details>

#### What are the requirements for a customer router? (450)

<details><summary>Answer</summary><p>
bgp
</p></details>

#### What is the port of BGP? (457)

<details><summary>Answer</summary><p>
179/tcp
</p></details>

#### What is BFD? How to enable it? (458)

<details><summary>Answer</summary><p>
<s>auto failover dx is enabled by default. enable it on the customer router</s>
<b>lower the failure detection time</b>
</p></details>

#### How long does it take for failover with and without BFD? (458, 597, 598)

<details><summary>Answer</summary><p>
300ms * 3times = 1s
<b>default 30s * 3 = 90s; DPD = method to detect the failure (for ipsec+bgp). BFD = method to lower the failure detection (for bgp)</b>
</p></details>

#### How can a user whitelist the ips range from AWS? (459)

<details><summary>Answer</summary><p>
whitelist the ip in ip-range.json
</p></details>

#### How many VIF can a hosted connection have? (465)

<details><summary>Answer</summary><p>
1
</p></details>

#### What Ip type does DX support? (498)

<details><summary>Answer</summary><p>
ipv4 and ipv6
</p></details>

#### How many route prefixes can the public vif advertise? (503)

<details><summary>Answer</summary><p>
1000
</p></details>

#### How many route prefixes can a private vif advertise? (507)

<details><summary>Answer</summary><p>
100
</p></details>

#### What is the limitation of vif and vgw location? (507)

<details><summary>Answer</summary><p>
in the same region
</p></details>

#### What service cannot access inside a VPC with DX? (510)

<details><summary>Answer</summary><p>
nat, nat + igw, peered vpc, gateway endpoint <b>,dns</b>
</p></details>

#### What is the usage of DX gateway? (517)

<details><summary>Answer</summary><p>
connect dx and vpc in any regions (pri/transit vif)
</p></details>

#### How many vif can a DX connection have? (526)

<details><summary>Answer</summary><p>
50(pub + pri)
</p></details>

#### How many transit vif can a DX connection have? (547)

<details><summary>Answer</summary><p>
1(transit)
</p></details>

#### How many DX gateways can a vif have? (530)

<details><summary>Answer</summary><p>
1
</p></details>

#### How many vif can a DX gateway connect to? (530)

<details><summary>Answer</summary><p>
30
</p></details>

#### How many vgw can a DX gateway have? (526,547)

<details><summary>Answer</summary><p>
10
</p></details>

#### How many tgw can a Dx gateway have? (538)

<details><summary>Answer</summary><p>
3
</p></details>

#### What is the charge for using Dx gateway? (533)

<details><summary>Answer</summary><p>
no
</p></details>

#### How many routes can be advised per TGW through the DX gateway? (539)

<details><summary>Answer</summary><p>
100 (bgp)
</p></details>

#### what is ECMP (251, 556) - only support BGP

<details><summary>Answer</summary><p>
load balancing between different dx connection the same dx location
</p></details>

#### how to setup Active-Active with public vif and public ASN (554, 558)

<details><summary>Answer</summary><p>
<li>advertise same prefix route</li>
<li>use ECMP (by aws)</li>
</p></details>

#### how to setup Active-Active with private vif and public ASN (558)

<details><summary>Answer</summary><p>
no
</p></details>

#### how to setup Active-Passive with public vif and public ASN (561)

<details><summary>Answer</summary><p>
<li>advertise same prefix route</li>
<li>as_path / med for incoming traffic to aws</li>
<li>local-pref for outgoing traffic to aws</li>
</p></details>

#### how to setup Active-Passive with public vif and public ASN (561)

<details><summary>Answer</summary><p>
advertise more specific prefix route
</p></details>

#### how to constrain the adviser routes to on-premises with public vif (567)

<details><summary>Answer</summary><p>
on-premises routes advertise the bgp communities to ask aws to advertise specific routes only (region / inter-region / global)
</p></details>

#### how to filter the adviser routes from aws in on-premises with public vif (567)

<details><summary>Answer</summary><p>
based on the bgp communities from aws. it tells where the route comes from
</p></details>

#### what is the routing policy with private vif (577, 582)

<details><summary>Answer</summary><p>
<li>advise more specific route </li>
<li>bgp: as_path / med or local preference (same dx location)</li>
<li>bgp-communities</li>
</p></details>

#### What is LAG? (584)

<details><summary>Answer</summary><p>
aggregate the dx connection to a larger bandwidth
</p></details>

#### How many DX connections can a LAG have? (584)

<details><summary>Answer</summary><p>
4
</p></details>

#### What is the bandwidth requirement of a LAG? (584)

<details><summary>Answer</summary><p>
same bandwidth and on the same customer device
</p></details>

#### What is the operation connection attribute in LAG? (589)

<details><summary>Answer</summary><p>
<b>no of connection that aws treating the LAG is up and running</b>
</p></details>

#### how to increase the resiliency of DX? (3 methods) (590)

<details><summary>Answer</summary><p>
<li>multi device (development)</li>
<li>multi location (resiliency)</li>
<li>multi device and multi dx location (max)</li>
<li><b>one more -> dx over vpn</b></li>
</p></details>

#### how to encrypt DX traffic? (2 methods) (601)

<details><summary>Answer</summary><p>
<li>dx over vpn (ipsec)</li>
<li>macsec</li>
</p></details>

#### When will the Dx connection be charged? (Hosted and Dedicated connection)  (621)

<details><summary>Answer</summary><p>
<li>dedicated: once aws create the connection for you (aws did their job, give you the LOA)</li>
<li>hosted: once you accept the connection</li>
</p></details>

#### What will be charged in Dx? (615)

<details><summary>Answer</summary><p>
<li>data out and port charge</li>
</p></details>

#### Who will be charged for the DTO fee? (622)

<details><summary>Answer</summary><p>
the resource owner to send out the traffic
</p></details>


### ELB

#### What Layer ALB, CLB, NLB, GLB  belong to? (639) 

<details><summary>Answer</summary><p>
<li>alb 7</li>
<li>clb 7/4</li>
<li>nlb 4</li>
<li>glb 3</li>
</p></details>

#### What protocol does ALB, CLB, NLB, GLB support? (641)

<details><summary>Answer</summary><p>
<li>alb http https</li>
<li>clb http https tcp tls</li>
<li>nlb tcp udp tls</li>
<li>glb ip</li>
</p></details>

#### Why does NLB have less latency than ALB? (652)

<details><summary>Answer</summary><p>
do not need to read the packets (we only check the ip port and protocol)
</p></details>

#### What kind of target can be used in the ALB and NLB target group? (653)

<details><summary>Answer</summary><p>
<li>alb: ip ec2 lambda</li>
<li>nlb: ip ec2</li>
</p></details>

#### What kind of protocol is supported in the health check? (653)

<details><summary>Answer</summary><p>
tcp
</p></details>

#### What are the connection idle timeouts of ALB, NLB, CLB? (657)

<details><summary>Answer</summary><p>
<li>alb 60</li>
<li>nlb 350<b>for tcp 120 for udp cannot be configured</b></li>
<li>clb 60</li>
</p></details>

#### What routing algorithm supported by ALB, NLB, CLB (659)

<details><summary>Answer</summary><p>
<li>alb, clb: least outstanding, round-robin</li>
<li>nbl: <s>hash</s> flow<b> hash</b></li>
</p></details>

#### How to keep the client ip in ALB, NLB (671, 672)

<details><summary>Answer</summary><p>
alb<b> & clb</b>: x-forward<b>ed-For</b>
nlb: <b>proxy protocol 2</b>
<b>clb: proxy protocol 1</b>
</p></details>

#### How to keep the client on the same instance for a period of time? (661)

<details><summary>Answer</summary><p>
sticky session
</p></details>

#### What is Cross-Zone Load Balancing? (663)

<details><summary>Answer</summary><p>
<li>by default enabled in alb, the traffic are load balanced to all instances evenly </li>
<li><b>disabled in nlb</b></li>
<li><b>disabled in clb (api), enabled in clb (console)</b></li>
</p></details>

#### What is SNI and which ELB does it support? (667)

<details><summary>Answer</summary><p>
<li>sni = <s>domain name in cert</s><b>multi ssl certs in one web server</b></li>
<li>alb and nlb support it</li>
</p></details>

#### What is Connection Draining (670)

<details><summary>Answer</summary><p>
remove opening connections from died instance (auto scaling group)
</p></details>


### Cloudfront

#### What services / source can be Cloudfront's origin? (683)

<details><summary>Answer</summary><p>
<li>any public ip</li>
<li>s3</li>
<li>media package and mediastore container</li>
</p></details>

#### Why public access is needed in cloudfront's origin (683)

<details><summary>Answer</summary><p>
Cloudfront does the health check from the internet
</p></details>

#### What is the origin group (687)

<details><summary>Answer</summary><p>
<li><b><s>primary & secondary of group of origin for failover</s></b></li>
<li>one primary and one secondary origin for failover</li>
<li>create a origin group, select primary & secondary origin, then select the group in cloudfront origin</li>
</p></details>

#### How to change custom header / behaviour in Cloudfront? (698)

<details><summary>Answer</summary><p>
use lambda@edge or cloudfront <s>action</s><b>function</b>
</p></details>

#### How to restrict the content to specific geolocation? (696)

<details><summary>Answer</summary><p>
<li>map the origin to geolocation <b>the allow / block list</b></li>
<li>choose either whitelist / blacklist and the countries for restriction</li>
</p></details>

#### What is AWs global accelerator? What does it work (709)

<details><summary>Answer</summary><p>
use anycast(2ips). will send traffic to aws edge locations and then reach to your service through aws backbone network
</p></details>

#### What is the difference between AWS global accelerator and cloudfront? (711)

<details><summary>Answer</summary><p>
cloudfront only supports http / https. accelerator using a transport layer so it can be udp <b>volip mqtt</b>
</p></details>

### Route53

#### What is the longest and shortest TTL in route53 (721)

<details><summary>Answer</summary><p>
<li>60s </li>
<li>24hr</li>
</p></details>

#### What are the alias targets in route53 (724)

<details><summary>Answer</summary><p>
<li>s3</li>
<li>beanstalk</li>
<li>vpce</li>
<li>accelerator</li>
<li>api gateway</li>
<li>elb</li>
<li>cloudfront</li>
<li>other route53 record<b>(same hosted zone)</b></li>
</p></details>

#### How to bind an RDS DB instance in route53 (748)

<details><summary>Answer</summary><p>
cname
</p></details>

#### Routing Policies in Route53? (725)

<details><summary>Answer</summary><p>
<li>simple</li>
<li>multivalue</li>
<li>failover</li>
<li>latency</li>
<li>weighted</li>
<li>geolocation</li>
<li>geoproximty</li>
</p></details>

#### How does Route53 perform the health check in a private VPC? (732)

<details><summary>Answer</summary><p>
setup a health check with cloudwatch alert 
</p></details>

#### How to setup hybrid DNS (754)

<details><summary>Answer</summary><p>
use route53 <s>forwarder</s><b>resolver</b>. create outbound(forward on-premise domain query to on-premise dns) and inbound (for on-premise <s>forwarder</s>resolver to forward the query to aws vpc domain) endpoint
</p></details>

#### How does AWS ensure the HA in route53? (807)

<details><summary>Answer</summary><p>
<li>random sharding</li>
<li>anycast striping</li>
</p></details>

### Network firewall

#### What layer SG, NACL, network firewall, WAF, shield?

<details><summary>Answer</summary><p>
<li>sg = <s>7</s> <b>3/4</b></li>
<li>nacl = <s>4</s> <b>3/4</b></li>
<li>network firewall <s>7-4</s> <b>7-3</b></li>
<li>waf = 7</li>
<li>shield = 3</li>
</p></details>

#### What is the VPC level in SG and NACL? (766)

<details><summary>Answer</summary><p>
<li>sg = <s>vpc</s> <b>instance</b></li>
<li>nacl = subnet </li>
</p></details>

#### When should we use nacl instead of sg? (768, 769)

<details><summary>Answer</summary><p>
to block something (sg cannot block traffic)
</p></details>

#### When should we use WAF instead of lacl ? (770)

<details><summary>Answer</summary><p>
<li>block many ips / handle ddos </li>
<li><b>block ip for the application cloudfront / alb behind</b></li>
</p></details>

#### Stateless and stateful of sg, nacl, network firewall, shield? (773)

<details><summary>Answer</summary><p>
<li>sg = stateful</li>
<li>nacl = stateless</li>
<li>network firewalld = both (stateless -> stateful)</li>
<li>shield = stateless</li>
</p></details>

#### How can a SYN cookie prevent DDos in packet flooding?

### Gateway Load balancer

#### what is the use case of gateway load balancer (813)

<details><summary>Answer</summary><p>
applicane (ip ec2)
</p></details>

#### what port does gateway load balancer need for GENEVE (817)

<details><summary>Answer</summary><p>
GENEVE <s>UDP</s> 6081
</p></details>


### Other

#### Centralised VPC Interface endpoint 295
#### access s3 with endpoint
#### use a private link to access a web server (NLB/EC2)
#### VPC peering connections (125)
#### VPC peering allows using Security group (301)
#### how many ip can BYOIP bring in (90)
#### How many VPC CIDRs can a VPC have? (72)
#### dns of vpc .2 169.254.169.253 (117)
#### Why is edge location safe? (711)
#### What must be enabled to use route53 in vpc?

Demo (266)

# Hand-on Labs

https://www.whizlabs.com/learn/course/aws-advanced-networking-speciality/195

## EC2
* [ ] 30

## CloudFront
* [ ] 1
* [ ] 2
* [ ] 10

## ALB
* [ ] 3
* [ ] 4
* [ ] 5

## WAF
* [ ] 11
* [ ] 12

## ACL
* [ ] 18
* [ ] 29

## VPN
* [ ] 21

## Endpoint
* [ ] 23
* [ ] 24
* [ ] 25

## Flow Log
* [ ] 26

## Container
* [ ] 28

# VPCs Connectivities

* [Transit gateway peering attachments](https://docs.aws.amazon.com/vpc/latest/tgw/tgw-peering.html)
* [What is VPC peering?](https://docs.aws.amazon.com/vpc/latest/peering/what-is-vpc-peering.html)
* [Transit Gateway vs VPC peering](https://docs.aws.amazon.com/whitepapers/latest/building-scalable-secure-multi-vpc-network-infrastructure/transit-gateway-vs-vpc-peering.html)

| Solution / Situation | same region | cross account | cross region |
| ---                  | ---         | ---           | ---          |
| VPC Peering          | OK          | OK            | OK           |
| TGW Peering          | OK          | OK            | OK           |
| TGW (attach VPC)     | OK          | OK            | NO           |
| AWS Managed VPN      | OK          | OK            | OK           |
| EC2 Based VPN        | OK          | OK            | OK           |

Private Link is something like tgw peer but for specific service only. It can cross regions and accounts.

#  Scope

| Resource | Scope  |
| ---      | ---    |
| VGW      | VPC    |
| TGW      | VPC    |
| NLB      | VPC    |
| ALB      | VPC    |
| Route53  | VPC    |
| NAT      | Subnet |

# Common Pattern

* Routing (582)

## Site-to-Site Connection routing

* Static - Active/ Active Tunnels (349)
* Static - Active/ Passive Tunnels (350)
* Dynamic - Active/ Active Tunnels (351)

## TGW

* Centralised NAT gateway (241)
* Centralised NAT instance (243)
* Centralised NAT instance + VPN (244)
* Centralised VPC interface endpoint + VPN (245)
* Hybrid VPN (247)
* Hybrid DX (248)

## VPC Peering

### Failed cases

| Page | Title                              |
|  --- | ---                                |
|  207 | CIDR overlap or transitive routing |
|  208 | from DX or VPN                     |
|  209 | to IGW                             |

## Site-to-site VPN / DX with VGW

### Use cases

| Page | Title                                      |
|  --- | ---                                        |
|  335 | Site-to-site Connection with NAT-Traversal |
|  361 | Single Site-to-site Connection with VGW    |
|  363 | Multiple Site-to-site Connection with VGW  |
|  365 | Redundant VPN connections for HA           |

### Failed cases

| Page | Title                                    |
|  --- | ---                                      |
|  340 | Site-to-site VPN to IGW                  |
|  341 | Site-to-site VPN to NAT                  |
|  343 | Site-to-site VPN to VPC Peering          |
|  344 | Site-to-site VPN to VPC Gateway endpoint |

### Successful cases

| Page | Title                                          |
|  --- | ---                                            |
|  342 | Site-to-site VPN to NAT Instance               |
|  345 | Site-to-site VPN to VPC Interface endpoint     |
|  345 | Site-to-site VPN to on-premise NAT to Internet |

## Site-to-site VPN with TGW

| Page | Title                                     |
| ---  | ---                                       |
| 362  | Multiple Site-to-site Connection with TGW |

## VPN CloudHub

* 369

## EC2 Based VPN

| Page | Title                                   |
|  --- | ---                                     |
|  375 | Single instance                         |
|  376 | HA                                      |
|  378 | Horizontal scaling - VPN EC2 per subnet |
|  379 | Horizontal scaling - Split traffic      |

## Transit VPC

| Page | Title                                          |
|  --- | ---                                            |
|  391 | Transit VPC                                    |
|  398 | global regions with single Transit Hub         |
|  398 | global regions with multiple Transit Hub (GRE) |
|  549 | Direct Connect and Transit VPC                 |

## DX

### Use cases

| Page | Title                                    |
|  --- | ---                                      |
|  591 | VPN as a backup                          |
|  592 | Dual Devices                             |
|  593 | Dual locations                           |
|  594 | Dual locations with DX connection backup |
|  602 | VPN over DX                              |

### Failed cases

| Page | Title                                   |
|  --- | ---                                     |
|  530 | DX Gateway with multiple customer sites |
|  542 | DX Gateway with multiple TGWs           |

### Successful cases

| Page | Title                                   |
| ---  | ---                                     |
| 546  | DX Gateway with multiple customer sites |

## Network Firewall

### Use cases

* Centralised: single firewall subnet / vpc. connect with tgw (791)
* Distributed: firewall subnet per vpc (790)

# Limitation

[VPC Limit](https://docs.aws.amazon.com/vpc/latest/userguide/amazon-vpc-limits.html)

## Peering

VPC Peering: 125

## Routing

| Resource     | Limit |
| ---          |   --- |
| Private VIFs |   100 |
| Public VIFs  |  1000 |

## MTU (159)

| Resource     | Limit |
| ---          |   --- |
| VPC          |  9001 |
| VPC Peering  |  1500 |
| DX           |  9001 |
| TGW (to DX)  |  8500 |
| TGW (to VPN) |  1500 |
| VPC Endpoint |  1500 |
| NAT          |  1500 |
| IGW          |  1500 |
| VPN          |  1500 |

## Bandwidth

* [Quotas for your TGW](https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-quotas.html)
* [Aggregated throughput limit for VGW](https://aws.amazon.com/vpn/faqs/)
* [NAT gateways](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html) 

### VPC (180)

| Resource    | Limit         |
| ---         | ---           |
| VPC Peer    | no            |
| IGW         | no            |
| NAT         | 5-45 Gbps      |
| TGW         | depends       |
| VGW         | 1.25Gbps      |
| VGW (to DX) | depends on DX |

### TGW

* 1 VPN can have 2 tunnels

| Resource   | Limit per resource |
| ---        | ---                |
| VPC        | 50Gbps             |
| DX         | 50Gbps             |
| TGW        | 50Gbps             |
| VPN tunnel | 1.25Gbps           |

### VPN Tunnel

1.25Gbps

### EC2

* [100G networking in AWS, a network performance deep dive](https://toonk.io/aws-network-performance-deep-dive/index.html)

EC2 network performance rules:
* single flow limit
* within regions and other

| Situation        | Limit |
| ---              |   --- |
| w/i the region   |  100% |
| to other regions |   50% |
| igw              |   50% |
| dx               |   50% |

#### Single Flow

| Situation           | Limit  |
| ---                 | ---    |
| w/i placement group | 10Gbps |
| other               | 5Gbps  |

#### Aggregated

* [General Purpose Network Performance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/general-purpose-instances.html#general-purpose-network-performance)

| Situation               | Limit   |
| ---                     | ---     |
| w enhanced networking   | 100Gbps |
| w/o enhanced networking | 25Gbps  |

| Network Driver | Limit   |
| ---            | ---     |
| Intel 82599VF  | 10Gbps  |
| ENA            | 100Gbps |
| EFA            | 100Gbps |
